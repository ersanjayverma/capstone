@page "/login/google"
@inject NavigationManager Navigation

<h3>Logging in with Google...</h3>

@code {
    protected override void OnInitialized()
    {
        // Construct redirect URL to Auth0's Universal Login with Google
        var domain = "blackhat.auth0.com";
        var clientId = "25pSHCWTZQHPupUPAXimVmvcIDKaUIEK";
        var redirectUri = Navigation.ToAbsoluteUri("authentication/login-callback").ToString();

        var loginUrl = $"https://{domain}/authorize" +
                       $"?response_type=code" +
                       $"&client_id={clientId}" +
                       $"&connection=google-oauth2" +
                       $"&redirect_uri={Uri.EscapeDataString(redirectUri)}" +
                       $"&scope=openid%20profile%20email";

        Navigation.NavigateTo(loginUrl, forceLoad: true);
    }
}