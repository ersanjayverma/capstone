@using MudBlazor
@inherits LayoutComponentBase
@inject NavigationManager Navigation
@inject AuthenticationStateProvider AuthStateProvider
@inject IJSRuntime JS 

<MudThemeProvider @bind-IsDarkMode="@_isDarkMode" Theme="@_theme"/>
    <MudLayout>
<AuthorizeView>
<Authorized Context="main">
        <!-- 🔷 Drawer -->
        <MudDrawer Open="true" Elevation="1" Variant="DrawerVariant.Mini">
         <!-- 🔷 ZTACS Logo at Top -->
            <div class="d-flex justify-center mb-4">
                <a href="/dashboard" title="ZTACS Home">
                    <img src="images/ztacs-logo.svg" alt="ZTACS Logo" style="height:48px;" />
                </a>
            </div>
            <MudNavMenu>
                <MudNavLink Href="/dashboard" Icon="@Icons.Material.Filled.Home">Home</MudNavLink>
                <MudNavLink Href="/threat-detection" Icon="@Icons.Material.Filled.Dangerous">Threat Detection</MudNavLink>
                <MudNavLink Href="/profile" Icon="@Icons.Material.Filled.Person">Profile</MudNavLink>
                <MudNavLink Href="/admin" Icon="@Icons.Material.Filled.AdminPanelSettings">Admin</MudNavLink>
            </MudNavMenu>
        </MudDrawer>
        <!-- 🟩 Main Content -->
        <MudMainContent Class="p-4">

            @Body
        </MudMainContent>
 </Authorized>
        <NotAuthorized>
        <!-- 🟩 Main Content -->
         <MudMainContent Class="p-4">
                @Body
         </MudMainContent>
        </NotAuthorized>
</AuthorizeView>
  
    </MudLayout>


@code {
    private bool _isDarkMode = true;
    private MudTheme _theme = new();
    private void OnLoginClicked() => Navigation.NavigateTo("login", forceLoad: true);
    private void OnLogoutClicked() => Navigation.NavigateTo("logout",forceLoad: true);
  
}

